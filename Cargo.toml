[profile.release]
codegen-units = 1
debug = 1
incremental = false
lto = true
opt-level = "z"
overflow-checks = false
panic = "abort"
strip = true

[workspace]
members = [
  "crates/vcz-daemon",
  "crates/vcz-ui",
  "crates/vcz-lib",
  "crates/vcz-test",
  "crates/vcz-macros",
  "crates/vcz",
  "crates/utp",
]

resolver = "2"

[workspace.dependencies]
int-enum = "1.2.0"
rkyv = { version = "0.8.11", features = ["unaligned", "big_endian"] }
bincode = { version = "=2.0.1" }
lru = "0.16.0"
bendy = { version = "0.5.0", features = ["std", "serde"] }
bitvec = "1.0.1"
bytes = "1.4.0"
clap = { version = "4.3.4", features = ["derive"] }
config = "0.15.13"
futures = "0.3.28"
hashbrown = "0.15.4"
hex = "0.4.3"
magnet-url = "3.0.0"
rand = "0.9.1"
rayon = "1.11.0"
memmap2 = "0.9.8"
ratatui = { version = "0.29.0" }
serde = { version = "1.0.185", features = ["derive"] }
signal-hook = { version = "0.3.18" }
signal-hook-tokio = { version = "0.3.1", features = ["futures-v0_3"] }
sha1 = { version = "0.10.6", features = ["sha1-asm"] }
thiserror = "2.0.12"
time = "0.3.36"
tokio = { version = "1.47.1", features = [
  "rt",
  "fs",
  "tracing",
  "time",
  "macros",
  "rt-multi-thread",
  "sync",
  "io-std",
  "io-util",
  "bytes",
  "net",
] }
tokio-util = { version = "0.7.8", features = ["codec"] }
toml = "0.9.2"
tracing = "0.1.37"
tracing-appender = "0.2.2"
tracing-subscriber = { version = "0.3.17", features = ["time"] }
urlencoding = "2.1.3"
vcz = { path = "crates/vcz" }
vcz-daemon = { path = "crates/vcz-daemon" }
vcz-ui = { path = "crates/vcz-ui" }
vcz-lib = { path = "crates/vcz-lib" }
vcz-macros = { path = "crates/vcz-macros" }

[workspace.metadata.spellcheck]
config = "spellcheck.toml"

# [workspace.lints.rust]
# unexpected_cfgs = { level = "warn", check-cfg = [
#   'cfg(fuzzing)',
#   'cfg(loom)',
#   'cfg(mio_unsupported_force_poll_poll)',
#   'cfg(tokio_allow_from_blocking_fd)',
#   'cfg(tokio_internal_mt_counters)',
#   'cfg(tokio_no_parking_lot)',
#   'cfg(tokio_no_tuning_tests)',
#   'cfg(tokio_taskdump)',
#   'cfg(tokio_unstable)',
#   'cfg(target_os, values("cygwin"))',
# ] }
